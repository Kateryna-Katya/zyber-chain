{"version":3,"file":"main-DEGQ8TS0.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ZYBER-CHAIN.BLOG — FINAL FULL JS\n * Включает: Lenis, GSAP, SplitType, SimpleParallax, Swiper\n */\n\n// 1. Конфигурация внешних библиотек\nconst libs = [\n  'https://unpkg.com/split-type',\n  'https://cdn.jsdelivr.net/npm/simple-parallax-js@5.5.1/dist/simpleParallax.min.js',\n  'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js'\n];\n\n// 2. Асинхронная загрузка библиотек\nPromise.all(libs.map(src => {\n  return new Promise((resolve) => {\n      const s = document.createElement('script');\n      s.src = src;\n      s.async = true;\n      s.onload = resolve;\n      document.head.appendChild(s);\n  });\n})).then(() => {\n  initApp();\n});\n\n// 3. Главная функция инициализации\nfunction initApp() {\n  initLenis();            // Плавный скролл\n  initMobileMenu();       // Исправленное мобильное меню\n  initHeroAnimation();    // Анимация текста в Hero\n  initParallax();         // Параллакс для всех изображений с классом .parallax-img\n  initInnovations();      // Анимация шагов в секции Инноваций\n  initBlogSlider();       // Слайдер Swiper для блога\n  initContactForm();      // Логика формы и капча\n  initCookiePopup();      // Cookie Consent с сохранением в localStorage\n}\n\n/* --- МОДУЛЬ ПЛАВНОГО СКРОЛЛА --- */\nfunction initLenis() {\n  const lenis = new Lenis();\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // Плавный переход по якорям (#)\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n      anchor.addEventListener('click', function(e) {\n          e.preventDefault();\n          const targetId = this.getAttribute('href');\n          const target = document.querySelector(targetId);\n          if (target) {\n              lenis.scrollTo(target);\n          }\n      });\n  });\n}\n\n/* --- МОДУЛЬ МОБИЛЬНОГО МЕНЮ (ИСПРАВЛЕНО) --- */\nfunction initMobileMenu() {\n  const burger = document.querySelector('.burger');\n  const menu = document.querySelector('.header__menu');\n  const allLinks = document.querySelectorAll('.header__menu a, .nav-link');\n\n  if (!burger || !menu) return;\n\n  // Открытие/Закрытие по клику на бургер\n  burger.addEventListener('click', (e) => {\n      e.stopPropagation();\n      const isActive = burger.classList.toggle('active');\n      menu.classList.toggle('active');\n      document.body.style.overflow = isActive ? 'hidden' : '';\n  });\n\n  // ЗАКРЫТИЕ ПРИ КЛИКЕ НА ЛЮБУЮ ССЫЛКУ (Для одностраничной навигации)\n  allLinks.forEach(link => {\n      link.addEventListener('click', () => {\n          burger.classList.remove('active');\n          menu.classList.remove('active');\n          document.body.style.overflow = '';\n      });\n  });\n\n  // Закрытие при клике вне меню\n  document.addEventListener('click', (e) => {\n      if (!menu.contains(e.target) && !burger.contains(e.target) && menu.classList.contains('active')) {\n          burger.classList.remove('active');\n          menu.classList.remove('active');\n          document.body.style.overflow = '';\n      }\n  });\n}\n\n/* --- МОДУЛЬ АНИМАЦИИ HERO --- */\nfunction initHeroAnimation() {\n  const title = document.querySelector('#hero-title');\n  if (!title) return;\n\n  // SplitType делит текст на слова, чтобы не было разрывов\n  const text = new SplitType(title, { types: 'words' });\n  const tl = gsap.timeline({ defaults: { ease: \"power4.out\" } });\n\n  tl.to('.hero__badge', { opacity: 1, y: 0, duration: 1, delay: 0.5 })\n    .from(text.words, { y: 60, opacity: 0, stagger: 0.1, duration: 1 }, \"-=0.7\")\n    .to('.hero__subtitle', { opacity: 1, y: 0, duration: 1 }, \"-=0.8\")\n    .to('.hero__actions', { opacity: 1, y: 0, duration: 1 }, \"-=0.8\");\n}\n\n/* --- МОДУЛЬ ПАРАЛЛАКСА --- */\nfunction initParallax() {\n  const images = document.querySelectorAll('.parallax-img');\n  if (images.length > 0) {\n      new simpleParallax(images, {\n          delay: 0.6,\n          scale: 1.3,\n          transition: 'cubic-bezier(0,0,0,1)'\n      });\n  }\n}\n\n/* --- МОДУЛЬ ИННОВАЦИЙ --- */\nfunction initInnovations() {\n  const steps = document.querySelectorAll('.step-item');\n  if (steps.length === 0) return;\n\n  gsap.to(steps, {\n      scrollTrigger: {\n          trigger: '.innovations__steps',\n          start: 'top 80%'\n      },\n      opacity: 1,\n      x: 0,\n      duration: 1,\n      stagger: 0.3,\n      ease: \"power2.out\"\n  });\n}\n\n/* --- МОДУЛЬ СЛАЙДЕРА БЛОГА --- */\nfunction initBlogSlider() {\n  const sliderElem = document.querySelector('.blog-slider');\n  if (!sliderElem) return;\n\n  new Swiper(sliderElem, {\n      slidesPerView: 1,\n      spaceBetween: 20,\n      loop: true,\n      navigation: {\n          nextEl: '.swiper-button-next-custom',\n          prevEl: '.swiper-button-prev-custom',\n      },\n      breakpoints: {\n          768: { slidesPerView: 2, spaceBetween: 30 },\n          1024: { slidesPerView: 3, spaceBetween: 30 }\n      }\n  });\n}\n\n/* --- МОДУЛЬ ФОРМЫ И КАПЧИ --- */\nlet captchaSecret;\nfunction initContactForm() {\n  const form = document.getElementById('contactForm');\n  if (!form) return;\n\n  const captchaLabel = document.getElementById('captcha-question');\n  const refreshCaptcha = () => {\n      const n1 = Math.floor(Math.random() * 10) + 1;\n      const n2 = Math.floor(Math.random() * 10) + 1;\n      captchaSecret = n1 + n2;\n      if (captchaLabel) captchaLabel.innerText = `${n1} + ${n2}`;\n  };\n\n  refreshCaptcha();\n\n  // Ограничение ввода в телефон\n  const phoneInput = document.getElementById('phone');\n  if (phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n          e.target.value = e.target.value.replace(/\\D/g, '');\n      });\n  }\n\n  form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const userAns = parseInt(document.getElementById('captcha-input').value);\n      const success = document.getElementById('form-success');\n      const error = document.getElementById('form-error');\n\n      if (userAns !== captchaSecret) {\n          if (error) error.style.display = 'block';\n          refreshCaptcha();\n          return;\n      }\n\n      const btn = form.querySelector('button');\n      btn.innerText = 'Отправка...';\n      btn.disabled = true;\n\n      setTimeout(() => {\n          if (success) success.style.display = 'block';\n          if (error) error.style.display = 'none';\n          form.reset();\n          btn.innerText = 'Отправить запрос';\n          btn.disabled = false;\n          refreshCaptcha();\n          setTimeout(() => { if (success) success.style.display = 'none'; }, 5000);\n      }, 1500);\n  });\n}\n\n/* --- МОДУЛЬ COOKIE POPUP --- */\nfunction initCookiePopup() {\n  const popup = document.getElementById('cookie-popup');\n  const btn = document.getElementById('cookie-accept');\n  if (!popup || !btn) return;\n\n  if (!localStorage.getItem('zyber_cookie_consent')) {\n      setTimeout(() => { popup.classList.add('active'); }, 2500);\n  }\n\n  btn.addEventListener('click', () => {\n      localStorage.setItem('zyber_cookie_consent', 'true');\n      popup.classList.remove('active');\n  });\n}"],"names":["libs","src","resolve","s","initApp","initLenis","initMobileMenu","initHeroAnimation","initParallax","initInnovations","initBlogSlider","initContactForm","initCookiePopup","lenis","raf","time","anchor","e","targetId","target","burger","menu","allLinks","isActive","link","title","text","images","steps","sliderElem","captchaSecret","form","captchaLabel","refreshCaptcha","n1","n2","phoneInput","userAns","success","error","btn","popup"],"mappings":"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"}