{"version":3,"file":"main-CW7sgvi1.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ZYBER-CHAIN.BLOG — FINAL OPTIMIZED JS\n * Содержит: Lenis, GSAP, SplitType, SimpleParallax, Swiper\n */\n\n// 1. Конфигурация библиотек\nconst libs = [\n    'https://unpkg.com/split-type',\n    'https://cdn.jsdelivr.net/npm/simple-parallax-js@5.5.1/dist/simpleParallax.min.js',\n    'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js'\n];\n\n// 2. Асинхронная загрузка и запуск\nPromise.all(libs.map(src => {\n    return new Promise((resolve) => {\n        const s = document.createElement('script');\n        s.src = src;\n        s.async = true;\n        s.onload = resolve;\n        document.head.appendChild(s);\n    });\n})).then(() => {\n    initApp();\n});\n\nfunction initApp() {\n    initLenis();            // Плавный скролл\n    initMobileMenu();       // Бургер и мобильная навигация\n    initHeroAnimation();    // Анимация текста (SplitType + GSAP)\n    initParallax();         // Параллакс для фото\n    initInnovations();      // Анимация в секции Инноваций\n    initBlogSlider();       // Слайдер Swiper\n    initContactForm();      // Форма, валидация и капча\n    initCookiePopup();      // Cookie Consent\n}\n\n/* --- МОДУЛИ --- */\n\n// Плавный скролл\nfunction initLenis() {\n    const lenis = new Lenis();\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // Плавная навигация по якорям\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function(e) {\n            e.preventDefault();\n            const target = document.querySelector(this.getAttribute('href'));\n            if (target) {\n                lenis.scrollTo(target);\n                // Закрываем меню, если кликнули по ссылке на мобилке\n                closeMobileMenu();\n            }\n        });\n    });\n}\n\n// Мобильное меню\nfunction initMobileMenu() {\n    const burger = document.querySelector('.burger');\n    const menu = document.querySelector('.header__menu');\n    \n    if (!burger || !menu) return;\n\n    burger.addEventListener('click', () => {\n        const isActive = burger.classList.toggle('active');\n        menu.classList.toggle('active');\n        // Блокируем скролл страницы при открытом меню\n        document.body.style.overflow = isActive ? 'hidden' : '';\n    });\n}\n\nfunction closeMobileMenu() {\n    const burger = document.querySelector('.burger');\n    const menu = document.querySelector('.header__menu');\n    if (burger && menu) {\n        burger.classList.remove('active');\n        menu.classList.remove('active');\n        document.body.style.overflow = '';\n    }\n}\n\n// Анимация Hero заголовка\nfunction initHeroAnimation() {\n    const title = document.querySelector('#hero-title');\n    if (!title) return;\n\n    // SplitType делит текст на слова (words), чтобы избежать разрывов букв\n    const text = new SplitType(title, { types: 'words' });\n    const tl = gsap.timeline({ defaults: { ease: \"power4.out\" } });\n\n    tl.to('.hero__badge', { opacity: 1, y: 0, duration: 1, delay: 0.3 })\n      .from(text.words, { y: 50, opacity: 0, stagger: 0.1, duration: 1 }, \"-=0.7\")\n      .to('.hero__subtitle', { opacity: 1, y: 0, duration: 1 }, \"-=0.8\")\n      .to('.hero__actions', { opacity: 1, y: 0, duration: 1 }, \"-=0.8\");\n}\n\n// Параллакс изображений\nfunction initParallax() {\n    const images = document.querySelectorAll('.parallax-img');\n    if (images.length > 0) {\n        new simpleParallax(images, {\n            delay: 0.6,\n            scale: 1.3,\n            transition: 'cubic-bezier(0,0,0,1)'\n        });\n    }\n}\n\n// Анимация в Innovations (ScrollTrigger)\nfunction initInnovations() {\n    if (!document.querySelector('.step-item')) return;\n\n    gsap.to('.step-item', {\n        scrollTrigger: {\n            trigger: '.innovations__steps',\n            start: 'top 80%'\n        },\n        opacity: 1,\n        x: 0,\n        duration: 1,\n        stagger: 0.3,\n        ease: \"power2.out\"\n    });\n}\n\n// Слайдер блога\nfunction initBlogSlider() {\n    const sliderElem = document.querySelector('.blog-slider');\n    if (!sliderElem) return;\n\n    new Swiper(sliderElem, {\n        slidesPerView: 1,\n        spaceBetween: 20,\n        loop: true,\n        navigation: {\n            nextEl: '.swiper-button-next-custom',\n            prevEl: '.swiper-button-prev-custom',\n        },\n        breakpoints: {\n            768: { slidesPerView: 2, spaceBetween: 30 },\n            1024: { slidesPerView: 3, spaceBetween: 30 }\n        }\n    });\n}\n\n// Контактная форма\nlet captchaAnswer;\nfunction initContactForm() {\n    const form = document.getElementById('contactForm');\n    if (!form) return;\n\n    const captchaLabel = document.getElementById('captcha-question');\n    \n    // Генерация капчи\n    const refreshCaptcha = () => {\n        const n1 = Math.floor(Math.random() * 10) + 1;\n        const n2 = Math.floor(Math.random() * 10) + 1;\n        captchaAnswer = n1 + n2;\n        if (captchaLabel) captchaLabel.innerText = `${n1} + ${n2}`;\n    };\n    \n    refreshCaptcha();\n\n    // Валидация только цифр в телефоне\n    const phoneInput = document.getElementById('phone');\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/\\D/g, '');\n        });\n    }\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        const userCaptcha = parseInt(document.getElementById('captcha-input').value);\n        const successBox = document.getElementById('form-success');\n        const errorBox = document.getElementById('form-error');\n\n        if (userCaptcha !== captchaAnswer) {\n            errorBox.style.display = 'block';\n            successBox.style.display = 'none';\n            refreshCaptcha();\n            return;\n        }\n\n        const btn = form.querySelector('button');\n        const originalText = btn.innerText;\n        btn.innerText = 'Отправка...';\n        btn.disabled = true;\n\n        // Имитация AJAX\n        setTimeout(() => {\n            btn.innerText = originalText;\n            btn.disabled = false;\n            successBox.style.display = 'block';\n            errorBox.style.display = 'none';\n            form.reset();\n            refreshCaptcha();\n            \n            setTimeout(() => { successBox.style.display = 'none'; }, 5000);\n        }, 1500);\n    });\n}\n\n// Cookie Popup\nfunction initCookiePopup() {\n    const popup = document.getElementById('cookie-popup');\n    const btn = document.getElementById('cookie-accept');\n    \n    if (!popup || !btn) return;\n\n    // Проверяем localStorage\n    if (!localStorage.getItem('cookies_accepted_zyber')) {\n        setTimeout(() => {\n            popup.classList.add('active');\n        }, 3000);\n    }\n\n    btn.addEventListener('click', () => {\n        localStorage.setItem('cookies_accepted_zyber', 'true');\n        popup.classList.remove('active');\n    });\n}"],"names":["libs","src","resolve","s","initApp","initLenis","initMobileMenu","initHeroAnimation","initParallax","initInnovations","initBlogSlider","initContactForm","initCookiePopup","lenis","raf","time","anchor","e","target","closeMobileMenu","burger","menu","isActive","title","text","images","sliderElem","captchaAnswer","form","captchaLabel","refreshCaptcha","n1","n2","phoneInput","userCaptcha","successBox","errorBox","btn","originalText","popup"],"mappings":"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"}